# 水果导航 - Chrome 起始页插件

基于飞书多维表格的 Chrome 浏览器起始页插件，支持多主题、自定义导航，让您的浏览器新标签页更加美观实用。

## 功能特性

- **替代默认起始页** - 打开新标签页时显示个性化导航页面
- **飞书数据同步** - 导航数据存储在飞书多维表格中，支持多设备同步
- **多主题风格** - 霓虹风格、海洋蓝调、翡翠绿、暗金色等多种皮肤
- **暗黑模式** - 支持一键切换深色/浅色模式
- **Art Deco 设计** - 精美的装饰艺术风格背景
- **农历显示** - 集成农历日期显示
- **图标获取** - 自动获取网站 Favicon 图标

## 快速开始

### 方式一：安装发布版本（推荐）

1. 下载已打包的插件文件
2. 打开 Chrome 浏览器，访问 `chrome://extensions/`
3. 开启右上角的「开发者模式」
4. 点击「加载已解压的扩展程序」
5. 选择插件文件夹完成安装

### 方式二：本地开发

```bash
# 克隆项目
git clone https://github.com/wubh2012/nav_chrome.git

# 进入项目目录
cd nav_chrome

# 使用 Chrome 加载扩展
# 打开 chrome://extensions/，开启开发者模式
# 点击"加载已解压的扩展程序"，选择项目目录
```

## 配置使用

### 测试模式（快速体验）

插件内置测试模式，无需配置即可使用：

1. 安装插件后，打开新标签页
2. 默认使用测试数据（内置演示站点）
3. 可在设置中切换测试模式开关

### 飞书多维表格配置（完整功能）

要使用完整的云端同步功能，需要配置飞书多维表格：

#### 1. 创建飞书应用

1. 访问 [飞书开放平台](https://open.feishu.cn/)
2. 注册/登录开发者账号
3. 创建企业自建应用
4. 获取 `APP_ID` 和 `APP_SECRET`

#### 2. 配置应用权限

在飞书开放平台的应用管理页面，为应用添加以下权限：
- `bitable:app` - 访问多维表格
- `bitable:record` - 读写数据记录

#### 3. 创建多维表格

1. 在飞书中创建一个多维表格
2. 创建包含以下字段的表格：

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| 站点名称 | 单行文本 | 网站名称 |
| 网址 | 超链接 | 网站地址 |
| 分类 | 单行文本 | 分类标签 |
| 排序 | 数字 | 越小越靠前 |
| 备用图标 | 附件/图片 | 可选 |

3. 获取多维表格的 `APP_TOKEN`（URL 中的 `app_token` 参数）
4. 获取表格的 `TABLE_ID`（URL 中的 `table_id` 参数）

#### 4. 配置插件

1. 点击新标签页右侧的「设置」按钮
2. 填入飞书配置信息：
   - `APP_ID` - 飞书应用 ID
   - `APP_SECRET` - 飞书应用密钥
   - `APP_TOKEN` - 多维表格 Token
   - `TABLE_ID` - 表格 ID
3. 点击「测试连接」验证配置
4. 点击「保存配置」

## 使用说明

### 界面功能

- **左侧边栏** - 分类导航，可切换不同分类
- **皮肤选择器** - 切换主题风格和暗黑模式
- **时间显示** - 顶部显示当前时间和农历日期
- **工具图标** - 主内容区显示常用网站快捷入口
- **添加按钮** - 点击右下角 + 按钮添加新网站

### 添加网站

1. 点击右下角的「+」按钮
2. 填写网站信息：
   - 网站网址（必填）
   - 网站名称（必填）
   - 分类（必填，可选择已有分类或自定义）
   - 排序（可选，数字越小越靠前）
3. 点击「保存」

### 删除网站

1. 将鼠标悬停在网站图标上
2. 点击出现的「×」按钮
3. 确认删除

### 切换主题

点击侧边栏底部的皮肤选择器：
- 选择不同的主题风格
- 点击月亮图标切换暗黑模式

## 项目结构

```
nav_chrome/
├── manifest.json           # 插件配置（V3）
├── newtab.html             # 起始页（主页面）
├── options.html            # 设置页
├── popup.html              # 快捷操作弹窗
├── background.js           # 后台 Service Worker
├── css/
│   ├── style.css           # 主样式
│   ├── options.css        # 设置页样式
│   └── popup.css          # 弹窗样式
├── js/
│   ├── app.js             # 主入口
│   ├── popup.js           # 弹窗脚本
│   ├── options.js         # 设置页脚本
│   └── modules/
│       ├── feishu-api.js  # 飞书 API
│       ├── storage.js     # 存储封装
│       ├── sync-manager.js # 同步管理
│       ├── theme-manager.js # 主题管理
│       ├── ui-renderer.js  # UI 渲染
│       └── link-manager.js # 链接管理
├── lib/
│   ├── axios.min.js        # HTTP 客户端
│   └── lunar.js           # 农历处理
└── img/                   # 图标资源
```

## 技术栈

- **Chrome Extension Manifest V3**
- **原生 JavaScript**（ES6+）
- **CSS3**（Art Deco 风格设计）
- **飞书开放平台 API**
- **农历库 (lunar.js)**

## 常见问题

### Q: 测试模式和飞书模式有什么区别？

测试模式使用内置的模拟数据，适合快速体验插件功能。飞书模式使用真实数据，支持多设备同步和团队共享。

### Q: 配置后数据没有显示？

1. 检查飞书应用的权限是否已开启
2. 确认多维表格的字段名称是否正确
3. 点击「测试连接」查看具体错误信息

### Q: 如何备份数据？

导航数据存储在飞书多维表格中，直接在飞书中备份表格即可。

## 贡献指南

欢迎提交 Issue 和 Pull Request！

GitHub 仓库：https://github.com/wubh2012/nav_chrome

## 许可证

MIT License

## 更新日志

### v1.0.0
- 初始版本发布
- 支持飞书多维表格数据同步
- 多主题风格支持
- 暗黑模式支持
